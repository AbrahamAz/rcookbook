"0","my_weigthing_function"
"1","function (df) 
"
"1","{
"
"1","    if (!is.data.frame(df)) {
"
"1","        stop(""df must be a data.frame"")
"
"1","    }
"
"1","    df <- as.data.frame(df, stringsAsFactors = FALSE)
"
"1","    df <- lapply(df, function(x) {
"
"1","        if (is.factor(x)) {
"
"1","            return(as.character(x))
"
"1","        }
"
"1","        x
"
"1","    }) %>% as.data.frame(stringsAsFactors = FALSE)
"
"1","    if (!all(data.stratum.column %in% names(df))) {
"
"1","        stop(paste0(""data frame column '"", data.stratum.column, 
"
"1","            ""'not found.""))
"
"1","    }
"
"1","    df[[data.stratum.column]] <- as.character(df[[data.stratum.column]])
"
"1","    sample.counts <- stratify.count.sample(data.strata = asdhk[[data.stratum.column]], 
"
"1","        sf.strata = population.counts)
"
"1","    if (""weights"" %in% names(df)) {
"
"1","        warning(""'weights' is used as a column name (will not be calculated from the sampling frame)"")
"
"1","    }
"
"1","    if (!all(names(sample.counts) %in% names(population.counts))) {
"
"1","        stop(""all strata names in column '"", data.stratum.column, 
"
"1","            ""' must also appear in the loaded sampling frame."")
"
"1","    }
"
"1","    weights <- stratify.weights(pop_strata = population.counts, 
"
"1","        sample_strata = sample.counts)
"
"1","    return(weights[df[[data.stratum.column]]])
"
"1","}
"
"1","<bytecode: 0x000001ebe87845c0>
"
"1","<environment: 0x000001ebe79be9b0>
"
"0","my_weigthing_function(main_dataset) %>% head()"
"2","Warning: 'weights' is used as a column name (will not be calculated from the sampling frame)"
"1","data.strata
"
"1"," 5km_rural "
"1"," 5km_rural "
"1","20km_rural "
"1","20km_rural "
"1","20km_rural "
"1","20km_rural "
"1","
"
"1"," 0.2747648 "
"1"," 0.2747648 "
"1"," 0.6221156 "
"1"," 0.6221156 "
"1"," 0.6221156 "
"1"," 0.6221156 "
"1","
"
