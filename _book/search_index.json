[["analysis.html", "5 Analysis 5.1 Frequencies with categorical variables 5.2 butteR survey_collapse 5.3 Analysis with numerical variables 5.4 Analysis by strata or subset 5.5 Weights 5.6 Repeating the above 5.7 Top 3 5.8 Borda count 5.9 Hypothesis testing", " 5 Analysis 5.1 Frequencies with categorical variables hypegrammaR / koboquest / butteR/ srvyr ###makes some additions. 5.2 butteR survey_collapse The survey_collapse function available in butteR aggregates both categorical and numerical columns of a srvyr object. It provides a standardized format output that includes mean/pct mean (point estimates), and the upper/lower confidence intervals along with the unweighted number/frequency for each response option. The survey_collapse function is built around the great srvyr package. The srvyr package is a more modern/tidyverse style wrapper for the survey package. Both the srvyr and survye packages are great and there use is highligh encouraged. The main advantages of survey_collapse The standardized output produced Ability to analyze both categorical and numerical columns with a consistent syntax Batch analyses and ability to perform many different subsetting investigations with ease Below is an example of its use. First we must read in some data and make it into a srvyr object ###makes some additions. library(tidyverse) library(butteR) library(srvyr) library(kableExtra) df&lt;-read_csv(&quot;inputs/UKR2007_MSNA20_HH_dataset_main_rcop.csv&quot;) dfsvy&lt;-as_survey(df) For the purpose of the example I next choose a variety of different column types to analyze. As you can see I have selected select_one (categorica), select_multiple (binary categorical), and numerical columns. I then put these all into one vector. # here are some random concatenated select multiple parent questions select_multiple_parent_cols&lt;-c(&quot;l4_which_difficult_access_health&quot;, &quot;j10_education_security_concerns_in_the_vicinity_of_facility&quot;) numeric_cols&lt;- c(&quot;b7_hohh_age&quot;, &quot;b5_age&quot;) select_one_cols&lt;- c(&quot;b9_hohh_marital_status&quot;, &quot;d1_hh_displacement_status&quot;) mixed_columns&lt;- c(select_multiple_parent_cols, numeric_cols, select_one_cols) A nice feature of the standardized output produced by survey_collapse is that you can perform variety of different types of analyses and then bind them together into one dataframe/tibble. Therefore I fill an empty list with analysis to facilitate binding later. For the first analyses I simply aggregate all the columns specified as mean/pct mean. I next analyze the same variable but this time subset/disaggreated by the strata column. Its a good idea to mutate an extra column indicating what exact analysis was done so that when they are binded together later they can more easily be manipulated outputs&lt;-list() outputs$overall&lt;-butteR::survey_collapse(df = dfsvy,vars_to_analyze = mixed_columns) %&gt;% mutate(analysis_level= &quot;overall&quot;) outputs$strata&lt;-butteR::survey_collapse(df = dfsvy,vars_to_analyze = mixed_columns,disag = &quot;strata&quot;) %&gt;% mutate(analysis_level= &quot;strata&quot;) Here is an example of what the long format data looks like as a table. outputs$strata %&gt;% head(100) %&gt;% kable() %&gt;% kable_styling(font_size=8) %&gt;% scroll_box(width = &quot;100%&quot;, box_css = &quot;border: 0px;&quot;) variable variable_val subset_1_name subset_1_val mean/pct mean/pct_low mean/pct_upp n_unweighted analysis_level b7_hohh_age strata 20km_rural 0.0000000 0.0000000 0.0000000 0 strata b7_hohh_age strata 20km_urban 0.0000000 0.0000000 0.0000000 0 strata b7_hohh_age strata 5km_rural 0.0000000 0.0000000 0.0000000 0 strata b7_hohh_age strata 5km_urban 0.0000000 0.0000000 0.0000000 0 strata b5_age strata 20km_rural 0.0000000 0.0000000 0.0000000 0 strata b5_age strata 20km_urban 0.0000000 0.0000000 0.0000000 0 strata b5_age strata 5km_rural 0.0000000 0.0000000 0.0000000 0 strata b5_age strata 5km_urban 0.0000000 0.0000000 0.0000000 0 strata b9_hohh_marital_status divorced strata 20km_rural 0.1007371 0.0714654 0.1300089 41 strata b9_hohh_marital_status married strata 20km_rural 0.4594595 0.4109922 0.5079267 187 strata b9_hohh_marital_status separated_married_but_not_living_together strata 20km_rural 0.0196560 0.0061556 0.0331565 8 strata b9_hohh_marital_status single strata 20km_rural 0.0515971 0.0300831 0.0731110 21 strata b9_hohh_marital_status unmarried_but_living_together strata 20km_rural 0.0884521 0.0608365 0.1160677 36 strata b9_hohh_marital_status widowed strata 20km_rural 0.2800983 0.2364263 0.3237702 114 strata b9_hohh_marital_status divorced strata 20km_urban 0.1138614 0.0828546 0.1448681 46 strata b9_hohh_marital_status married strata 20km_urban 0.4331683 0.3847987 0.4815379 175 strata b9_hohh_marital_status separated_married_but_not_living_together strata 20km_urban 0.0247525 0.0095860 0.0399189 10 strata b9_hohh_marital_status single strata 20km_urban 0.1039604 0.0741674 0.1337534 42 strata b9_hohh_marital_status unmarried_but_living_together strata 20km_urban 0.0495050 0.0283303 0.0706796 20 strata b9_hohh_marital_status widowed strata 20km_urban 0.2747525 0.2311781 0.3183268 111 strata b9_hohh_marital_status divorced strata 5km_rural 0.1019900 0.0723749 0.1316052 41 strata b9_hohh_marital_status married strata 5km_rural 0.3955224 0.3476737 0.4433711 159 strata b9_hohh_marital_status separated_married_but_not_living_together strata 5km_rural 0.0199005 0.0062339 0.0335671 8 strata b9_hohh_marital_status single strata 5km_rural 0.0820896 0.0552275 0.1089516 33 strata b9_hohh_marital_status unmarried_but_living_together strata 5km_rural 0.0522388 0.0304647 0.0740129 21 strata b9_hohh_marital_status widowed strata 5km_rural 0.3482587 0.3016375 0.3948799 140 strata b9_hohh_marital_status divorced strata 5km_urban 0.1361386 0.1026629 0.1696143 55 strata b9_hohh_marital_status married strata 5km_urban 0.3861386 0.3386134 0.4336638 156 strata b9_hohh_marital_status separated_married_but_not_living_together strata 5km_urban 0.0272277 0.0113412 0.0431142 11 strata b9_hohh_marital_status single strata 5km_urban 0.0816832 0.0549482 0.1084181 33 strata b9_hohh_marital_status unmarried_but_living_together strata 5km_urban 0.0470297 0.0263643 0.0676951 19 strata b9_hohh_marital_status widowed strata 5km_urban 0.3217822 0.2761803 0.3673841 130 strata d1_hh_displacement_status displaced_and_idp_status strata 20km_rural 0.0466830 0.0261663 0.0671998 19 strata d1_hh_displacement_status displaced_but_does_not_have_idp_status strata 20km_rural 0.0024570 -0.0023578 0.0072718 1 strata d1_hh_displacement_status no strata 20km_rural 0.9115479 0.8839323 0.9391635 371 strata d1_hh_displacement_status partially_displaced_and_dont_have_idp_status strata 20km_rural 0.0073710 -0.0009479 0.0156899 3 strata d1_hh_displacement_status partially_displaced_and_have_idp_status strata 20km_rural 0.0221130 0.0078116 0.0364144 9 strata d1_hh_displacement_status used_to_be_displaced_but_returned_and_has_no_status_of_idp strata 20km_rural 0.0098280 0.0002340 0.0194220 4 strata d1_hh_displacement_status displaced_and_idp_status strata 20km_urban 0.0272277 0.0113412 0.0431142 11 strata d1_hh_displacement_status no strata 20km_urban 0.9603960 0.9413585 0.9794336 388 strata d1_hh_displacement_status partially_displaced_and_have_idp_status strata 20km_urban 0.0099010 0.0002361 0.0195659 4 strata d1_hh_displacement_status used_to_be_displaced_but_returned_and_has_no_status_of_idp strata 20km_urban 0.0024752 -0.0023753 0.0073258 1 strata d1_hh_displacement_status displaced_and_idp_status strata 5km_rural 0.0895522 0.0616100 0.1174944 36 strata d1_hh_displacement_status displaced_but_does_not_have_idp_status strata 5km_rural 0.0049751 -0.0019100 0.0118603 2 strata d1_hh_displacement_status no strata 5km_rural 0.8781095 0.8460944 0.9101245 353 strata d1_hh_displacement_status partially_displaced_and_have_idp_status strata 5km_rural 0.0024876 -0.0023871 0.0073622 1 strata d1_hh_displacement_status used_to_be_displaced_but_returned_and_has_a_status_of_idp strata 5km_rural 0.0024876 -0.0023871 0.0073622 1 strata d1_hh_displacement_status used_to_be_displaced_but_returned_and_has_no_status_of_idp strata 5km_rural 0.0223881 0.0079108 0.0368653 9 strata d1_hh_displacement_status displaced_and_idp_status strata 5km_urban 0.0618812 0.0383618 0.0854005 25 strata d1_hh_displacement_status displaced_but_does_not_have_idp_status strata 5km_urban 0.0049505 -0.0019007 0.0118017 2 strata d1_hh_displacement_status no strata 5km_urban 0.9108911 0.8830805 0.9387017 368 strata d1_hh_displacement_status partially_displaced_and_dont_have_idp_status strata 5km_urban 0.0024752 -0.0023753 0.0073258 1 strata d1_hh_displacement_status partially_displaced_and_have_idp_status strata 5km_urban 0.0049505 -0.0019007 0.0118017 2 strata d1_hh_displacement_status used_to_be_displaced_but_returned_and_has_a_status_of_idp strata 5km_urban 0.0024752 -0.0023753 0.0073258 1 strata d1_hh_displacement_status used_to_be_displaced_but_returned_and_has_no_status_of_idp strata 5km_urban 0.0123762 0.0015841 0.0231684 5 strata This is a great format for manipulating/filtering and then graphing with ggplot output_df&lt;- bind_rows(outputs) output_df %&gt;% filter(analysis_level==&quot;overall&quot;) %&gt;% mutate(question_val= paste0(variable,&quot;.&quot;,variable_val)) %&gt;% ggplot(aes(x= question_val,y= `mean/pct`))+ geom_point(stat=&quot;identity&quot;, position = position_dodge(width = 0.3))+ geom_errorbar(aes(ymin= `mean/pct_low`, ymax= `mean/pct_upp`), width=0.2,position = position_dodge(width = 0.3))+ scale_y_continuous(labels = scales::percent,breaks = seq(0,1,by=0.1))+ coord_flip()+ theme_bw()+ theme( axis.title = element_blank(), axis.text.x = element_text(angle=90), legend.title= element_blank() ) # Easy to plot subset findings as well! output_df %&gt;% filter(analysis_level==&quot;strata&quot;) %&gt;% mutate(question_val= paste0(variable,&quot;.&quot;,variable_val)) %&gt;% ggplot(aes(x= question_val,y= `mean/pct`, color=subset_1_val))+ geom_point(stat=&quot;identity&quot;, position = position_dodge(width = 0.3))+ geom_errorbar(aes(ymin= `mean/pct_low`, ymax= `mean/pct_upp`), width=0.2,position = position_dodge(width = 0.3))+ scale_y_continuous(labels = scales::percent,breaks = seq(0,1,by=0.1))+ coord_flip()+ theme_bw()+ theme( axis.title = element_blank(), axis.text.x = element_text(angle=90), legend.title= element_blank() ) 5.2.1 select_one 5.2.2 select_mutiple 5.3 Analysis with numerical variables Summarytools (CRAN package) Spatstat hypegrammaR / koboquest / butteR ### Averages ### Median 5.4 Analysis by strata or subset 5.4.1 By strata, overall, dissagregatios 5.5 Weights surveyweights survey (CRAN package) srvyr (CRAN package) 5.6 Repeating the above 5.7 Top 3 5.8 Borda count 5.9 Hypothesis testing 5.9.1 T-test 5.9.2 ANOVA 5.9.3 chi-squares "]]
