[["composite-indicators.html", "4 Composite indicators 4.1 Composite with 1 categorical variable - select one 4.2 Composite with 2 categorical variables 4.3 Composite with 1 categorical variable - select multiple 4.4 Composite with 1 numerical variable 4.5 Composite with 2 numerical variables 4.6 New indicators from a loop to main dataset", " 4 Composite indicators composeR dplyr::case_when 4.1 Composite with 1 categorical variable - select one For this example, we will build an improved source of water variable. In this dataset, the indicator we are looking at is f11_dinking_water_source and the options for un-improved source of water are: trucked_in_water_truck_with_a_tank_etc drinking_water_from_water_kiosk_booth_with_water_for_bottling bottled_water_water_purchased_in_bottles other_specify #Creating a vector of un-improved source of water unimproved_source &lt;- c(&quot;trucked_in_water_truck_with_a_tank_etc&quot;, &quot;drinking_water_from_water_kiosk_booth_with_water_for_bottling&quot;, &quot;bottled_water_water_purchased_in_bottles&quot;, &quot;other_specify&quot;) #Using base R main_dataset$wash_improved_source_baser &lt;- ifelse(main_dataset$f11_dinking_water_source %in% unimproved_source, &quot;not_improved&quot;, &quot;improved&quot;) table(main_dataset$f11_dinking_water_source, main_dataset$wash_improved_source_baser, useNA = &quot;ifany&quot;) ## ## improved ## bottled_water_water_purchased_in_bottles 0 ## drinking_water_from_water_kiosk_booth_with_water_for_bottling 0 ## other_specify 0 ## personal_well 414 ## public_well_or_boreholes_shared_access 187 ## tap_drinking_water_centralized_water_supply 479 ## technical_piped_water 2 ## trucked_in_water_truck_with_a_tank_etc 0 ## ## not_improved ## bottled_water_water_purchased_in_bottles 68 ## drinking_water_from_water_kiosk_booth_with_water_for_bottling 366 ## other_specify 11 ## personal_well 0 ## public_well_or_boreholes_shared_access 0 ## tap_drinking_water_centralized_water_supply 0 ## technical_piped_water 0 ## trucked_in_water_truck_with_a_tank_etc 90 #Using case_when main_dataset &lt;- main_dataset %&gt;% mutate(wash_improved_source_dplyr = case_when(f11_dinking_water_source %in% unimproved_source ~ &quot;not_improved&quot;, TRUE ~ &quot;improved&quot;)) table(main_dataset$f11_dinking_water_source, main_dataset$wash_improved_source_dplyr, useNA = &quot;ifany&quot;) ## ## improved ## bottled_water_water_purchased_in_bottles 0 ## drinking_water_from_water_kiosk_booth_with_water_for_bottling 0 ## other_specify 0 ## personal_well 414 ## public_well_or_boreholes_shared_access 187 ## tap_drinking_water_centralized_water_supply 479 ## technical_piped_water 2 ## trucked_in_water_truck_with_a_tank_etc 0 ## ## not_improved ## bottled_water_water_purchased_in_bottles 68 ## drinking_water_from_water_kiosk_booth_with_water_for_bottling 366 ## other_specify 11 ## personal_well 0 ## public_well_or_boreholes_shared_access 0 ## tap_drinking_water_centralized_water_supply 0 ## technical_piped_water 0 ## trucked_in_water_truck_with_a_tank_etc 90 #Same same table(main_dataset$wash_improved_source_baser, main_dataset$wash_improved_source_dplyr) ## ## improved not_improved ## improved 1082 0 ## not_improved 0 535 4.2 Composite with 2 categorical variables e.g. access to improved source of water and distance # data_set &lt;- data_set %&gt;% # mutate(case_when XXXX) 4.3 Composite with 1 categorical variable - select multiple e.g. improved source of water # data_set &lt;- data_set %&gt;% # mutate(case_when XXXX) 4.4 Composite with 1 numerical variable e.g. FCS # data_set &lt;- data_set %&gt;% # mutate(case_when XXXX) 4.5 Composite with 2 numerical variables # data_set &lt;- data_set %&gt;% # mutate(case_when XXXX) 4.6 New indicators from a loop to main dataset e.g. aggregating the number of children going to school from a loop "]]
